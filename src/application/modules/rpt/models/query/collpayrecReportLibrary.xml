<?xml version="1.0"?>

  <querylibrary>
   <query id="collPayRec">
     <title>Collector Payment Recept Report</title>
     <result>
         <tableheader>
            <label>EMPLOYEE ID</label>
            <label>PROJECT ID</label>
            <label>TOTAL PAYMENT</label>
            <label>TOTAL RECEIPT</label>
            <label>PAYMENT DETAILS</label>
            <label>RECEIPT DETAILS</label>
         </tableheader>

         <queryheader>
             <item>EMPLOYEE_ID</item>
             <item>SCHEME_ID</item>
             <item>PAYMENT_SUM</item>
             <item>RECEIPT_SUM</item>
             <item type="window" id="paymentGroup">PAYMENT_GROUPED</item>
             <item type="window" id="receiptGroup">RECEIPT_GROUPED</item>
         </queryheader>

		 <sumrequired>
			<item>PAYMENT_SUM</item>
			<item>RECEIPT_SUM</item>
		 </sumrequired>

         <sqlcontent>
			   select EMPLOYEE_ID , 
			   SCHEME_ID , 
			   SUM(TOTAL_PAYMENT_PRINCIPAL) AS PAYMENT_SUM, 
			   GROUP_CONCAT(CONCAT(CUSTOMER_ID , ' : ' , TOTAL_PAYMENT_PRINCIPAL) SEPARATOR '@HTML:BR@') PAYMENT_GROUPED , SUM(TOTAL_RECEIPT_PRINCIPAL) AS RECEIPT_SUM , 
			   GROUP_CONCAT(CONCAT(CUSTOMER_ID , ' : ' , TOTAL_RECEIPT_PRINCIPAL) SEPARATOR '@HTML:BR@') RECEIPT_GROUPED
			   from ltr_trn_summary
			   where  1 = 1
			   and   ( TOTAL_PAYMENT_PRINCIPAL > 0 OR TOTAL_RECEIPT_PRINCIPAL > 0 )
			   group by EMPLOYEE_ID , SCHEME_ID 
			   order by 1 desc
         </sqlcontent>

		 <patinatorconditions>
            <pages>20</pages>
            <rowsperpage>20</rowsperpage>
         </patinatorconditions>

     </result>

     <criteria>
         <searchparams>  
            
             <searchitem>
                 <searchparam>Y</searchparam>
                 <name>entity_id</name>
				 <class>employee_id</class>
                 <columnvalue>EMPLOYEE_ID</columnvalue>
                 <conditiontype>@PATTERN@</conditiontype>
                 <label>Collector Code</label>
                 <isdisplay>Y</isdisplay>
                 <order>2</order>
                 <datatype>CHAR</datatype>
                 <displaytype>TEXT</displaytype>
                 <length>20</length>
             </searchitem>
           

			 <searchitem>
                 <searchparam>Y</searchparam>
                 <name>schm_id</name>
				 <class>scheme_id</class>
                 <columnvalue>SCHEME_ID</columnvalue>
                 <conditiontype>@PATTERN@</conditiontype>
                 <label>Project Code</label>
                 <isdisplay>Y</isdisplay>
                 <order>3</order>
                 <datatype>CHAR</datatype>
                 <displaytype>TEXT</displaytype>
                 <length>20</length>
             </searchitem>


			 <searchitem>
                 <isdisplay>y</isdisplay>
                 <order>3</order>
                 <displaytype>BLANK</displaytype>
             </searchitem>

             <searchitem>
                 <name>Search</name>
                 <isdisplay>Y</isdisplay>
                 <order>5</order>
                 <id>submit</id>
                 <datatype>CHAR</datatype>
                 <displaytype>SUBMIT</displaytype>
                 <value>Search</value>
             </searchitem>
        </searchparams>
     </criteria>

   </query>
   </querylibrary> 


